{"ast":null,"code":"import React from'react';import{format}from'date-fns';import{useAuth}from'../../contexts/AuthContext';import{likePost,unlikePost}from'../../services/postService';// Asegúrate de importar esto\n// Necesitamos la carpeta components\n// Necesitamos la carpeta PostCard dentro de components\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PostCard=_ref=>{let{post,onLikeToggle}=_ref;const{token,user,isAuthenticated}=useAuth();const isLikedByUser=post.likedByCurrentUser;// Asume que el backend envía esta propiedad\nconst handleLikeToggle=async()=>{if(!isAuthenticated||!token){alert('You must be logged in to like a post.');return;}try{if(isLikedByUser){await unlikePost(post.id,token);}else{await likePost(post.id,token);}onLikeToggle(post.id);// Notifica al componente padre para actualizar la lista\n}catch(error){console.error('Error toggling like:',error);alert('Failed to toggle like. Please try again.');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"post-card\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"post-message\",children:post.message}),/*#__PURE__*/_jsxs(\"p\",{className:\"post-meta\",children:[\"Posted by User ID: \",post.userId,\" on \",format(new Date(post.publicationDate),'MMM dd, yyyy HH:mm')]}),/*#__PURE__*/_jsxs(\"div\",{className:\"post-actions\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Likes: \",post.likesCount]}),isAuthenticated&&/*#__PURE__*/_jsx(\"button\",{onClick:handleLikeToggle,className:isLikedByUser?'liked':'',children:isLikedByUser?'Unlike':'Like'})]})]});};export default PostCard;","map":{"version":3,"names":["React","format","useAuth","likePost","unlikePost","jsx","_jsx","jsxs","_jsxs","PostCard","_ref","post","onLikeToggle","token","user","isAuthenticated","isLikedByUser","likedByCurrentUser","handleLikeToggle","alert","id","error","console","className","children","message","userId","Date","publicationDate","likesCount","onClick"],"sources":["C:/Users/marcorebollo/Documents/DesarrollosUdm/prueba_fronted/pruebafrontend/social-app/src/components/PostCard/PostCard.js"],"sourcesContent":["import React from 'react';\nimport { format } from 'date-fns';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { likePost, unlikePost } from '../../services/postService'; // Asegúrate de importar esto\n\n// Necesitamos la carpeta components\n// Necesitamos la carpeta PostCard dentro de components\n\nconst PostCard = ({ post, onLikeToggle }) => {\n    const { token, user, isAuthenticated } = useAuth();\n    const isLikedByUser = post.likedByCurrentUser; // Asume que el backend envía esta propiedad\n\n    const handleLikeToggle = async () => {\n        if (!isAuthenticated || !token) {\n            alert('You must be logged in to like a post.');\n            return;\n        }\n        try {\n            if (isLikedByUser) {\n                await unlikePost(post.id, token);\n            } else {\n                await likePost(post.id, token);\n            }\n            onLikeToggle(post.id); // Notifica al componente padre para actualizar la lista\n        } catch (error) {\n            console.error('Error toggling like:', error);\n            alert('Failed to toggle like. Please try again.');\n        }\n    };\n\n    return (\n        <div className=\"post-card\">\n            <p className=\"post-message\">{post.message}</p>\n            <p className=\"post-meta\">\n                Posted by User ID: {post.userId} on {format(new Date(post.publicationDate), 'MMM dd, yyyy HH:mm')}\n            </p>\n            <div className=\"post-actions\">\n                <span>Likes: {post.likesCount}</span>\n                {isAuthenticated && (\n                    <button onClick={handleLikeToggle} className={isLikedByUser ? 'liked' : ''}>\n                        {isLikedByUser ? 'Unlike' : 'Like'}\n                    </button>\n                )}\n            </div>\n        </div>\n    );\n};\n\nexport default PostCard;\n\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,MAAM,KAAQ,UAAU,CACjC,OAASC,OAAO,KAAQ,4BAA4B,CACpD,OAASC,QAAQ,CAAEC,UAAU,KAAQ,4BAA4B,CAAE;AAEnE;AACA;AAAA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEA,KAAM,CAAAC,QAAQ,CAAGC,IAAA,EAA4B,IAA3B,CAAEC,IAAI,CAAEC,YAAa,CAAC,CAAAF,IAAA,CACpC,KAAM,CAAEG,KAAK,CAAEC,IAAI,CAAEC,eAAgB,CAAC,CAAGb,OAAO,CAAC,CAAC,CAClD,KAAM,CAAAc,aAAa,CAAGL,IAAI,CAACM,kBAAkB,CAAE;AAE/C,KAAM,CAAAC,gBAAgB,CAAG,KAAAA,CAAA,GAAY,CACjC,GAAI,CAACH,eAAe,EAAI,CAACF,KAAK,CAAE,CAC5BM,KAAK,CAAC,uCAAuC,CAAC,CAC9C,OACJ,CACA,GAAI,CACA,GAAIH,aAAa,CAAE,CACf,KAAM,CAAAZ,UAAU,CAACO,IAAI,CAACS,EAAE,CAAEP,KAAK,CAAC,CACpC,CAAC,IAAM,CACH,KAAM,CAAAV,QAAQ,CAACQ,IAAI,CAACS,EAAE,CAAEP,KAAK,CAAC,CAClC,CACAD,YAAY,CAACD,IAAI,CAACS,EAAE,CAAC,CAAE;AAC3B,CAAE,MAAOC,KAAK,CAAE,CACZC,OAAO,CAACD,KAAK,CAAC,sBAAsB,CAAEA,KAAK,CAAC,CAC5CF,KAAK,CAAC,0CAA0C,CAAC,CACrD,CACJ,CAAC,CAED,mBACIX,KAAA,QAAKe,SAAS,CAAC,WAAW,CAAAC,QAAA,eACtBlB,IAAA,MAAGiB,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAEb,IAAI,CAACc,OAAO,CAAI,CAAC,cAC9CjB,KAAA,MAAGe,SAAS,CAAC,WAAW,CAAAC,QAAA,EAAC,qBACF,CAACb,IAAI,CAACe,MAAM,CAAC,MAAI,CAACzB,MAAM,CAAC,GAAI,CAAA0B,IAAI,CAAChB,IAAI,CAACiB,eAAe,CAAC,CAAE,oBAAoB,CAAC,EAClG,CAAC,cACJpB,KAAA,QAAKe,SAAS,CAAC,cAAc,CAAAC,QAAA,eACzBhB,KAAA,SAAAgB,QAAA,EAAM,SAAO,CAACb,IAAI,CAACkB,UAAU,EAAO,CAAC,CACpCd,eAAe,eACZT,IAAA,WAAQwB,OAAO,CAAEZ,gBAAiB,CAACK,SAAS,CAAEP,aAAa,CAAG,OAAO,CAAG,EAAG,CAAAQ,QAAA,CACtER,aAAa,CAAG,QAAQ,CAAG,MAAM,CAC9B,CACX,EACA,CAAC,EACL,CAAC,CAEd,CAAC,CAED,cAAe,CAAAP,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}